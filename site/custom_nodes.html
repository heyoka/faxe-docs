
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="configuration.html">
      
      
        <link rel="next" href="datetime-parsing.html">
      
      <link rel="icon" href="assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.0.11">
    
    
      
        <title>Custom nodes written in python - Faxe</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.0d440cfe.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.2505c338.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="stylesheets/extra.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#custom-nodes-written-in-python" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="index.html" title="Faxe" class="md-header__button md-logo" aria-label="Faxe" data-md-component="logo">
      
  <img src="assets/images/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Faxe
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Custom nodes written in python
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="index.html" title="Faxe" class="md-nav__button md-logo" aria-label="Faxe" data-md-component="logo">
      
  <img src="assets/images/favicon.png" alt="logo">

    </a>
    Faxe
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        General
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="configuration.html" class="md-nav__link">
        Configuration
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Custom nodes written in python
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="custom_nodes.html" class="md-nav__link md-nav__link--active">
        Custom nodes written in python
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#faxe-base-class" class="md-nav__link">
    Faxe base class
  </a>
  
    <nav class="md-nav" aria-label="Faxe base class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav" aria-label="Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options-static" class="md-nav__link">
    options (static)
  </a>
  
    <nav class="md-nav" aria-label="options (static)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types-for-options" class="md-nav__link">
    Data types for options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-options-for-every-custom-node" class="md-nav__link">
    Common options for every custom node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#init" class="md-nav__link">
    init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle_point" class="md-nav__link">
    handle_point
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle_batch" class="md-nav__link">
    handle_batch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inherited-methods-from-the-faxe-class" class="md-nav__link">
    Inherited methods from the Faxe class
  </a>
  
    <nav class="md-nav" aria-label="Inherited methods from the Faxe class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#emit" class="md-nav__link">
    emit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log" class="md-nav__link">
    log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#now-static" class="md-nav__link">
    now (static)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data types
  </a>
  
    <nav class="md-nav" aria-label="Data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#faxe-data-items" class="md-nav__link">
    FAXE Data items
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-point" class="md-nav__link">
    data-point
  </a>
  
    <nav class="md-nav" aria-label="data-point">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fields" class="md-nav__link">
    fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags" class="md-nav__link">
    tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dtag" class="md-nav__link">
    dtag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-batch" class="md-nav__link">
    data-batch
  </a>
  
    <nav class="md-nav" aria-label="data-batch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    points
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dtag_1" class="md-nav__link">
    dtag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-persistence" class="md-nav__link">
    State persistence
  </a>
  
    <nav class="md-nav" aria-label="State persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activate-persistence" class="md-nav__link">
    Activate persistence
  </a>
  
    <nav class="md-nav" aria-label="Activate persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual" class="md-nav__link">
    manual
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-data" class="md-nav__link">
    State data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-classes" class="md-nav__link">
    Helper classes
  </a>
  
    <nav class="md-nav" aria-label="Helper classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helper-class-for-working-with-data-point-objects" class="md-nav__link">
    Helper class for working with data-point objects.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helper-class-for-working-with-data-batch-objects" class="md-nav__link">
    Helper class for working with data-batch objects.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="datetime-parsing.html" class="md-nav__link">
        Timestamps and Datetime strings in Faxe
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="flow_concurrency.html" class="md-nav__link">
        Flow concurrency
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="introduction.html" class="md-nav__link">
        Intro
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="metrics.html" class="md-nav__link">
        Metrics, Connection status, Debug events and Logs
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="os_tuning.html" class="md-nav__link">
        Os tuning
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="state_persistence.html" class="md-nav__link">
        Flow state persistence
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="stop_when_idle.html" class="md-nav__link">
        Auto stop feature
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
      
      
      
        <label class="md-nav__link" for="__nav_11" id="__nav_11_label" tabindex="0">
          Dfs examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Dfs examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_examples/consume_data_rewrite_republish.html" class="md-nav__link">
        Consume data rewrite republish
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_examples/fun_with_http.html" class="md-nav__link">
        Fun with http
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_examples/message_re-modeling.html" class="md-nav__link">
        Message re modeling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_examples/python_double.html" class="md-nav__link">
        Python double
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_examples/read_modbus_publish_mqtt.html" class="md-nav__link">
        Read modbus publish mqtt
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_examples/using_mem_node.html" class="md-nav__link">
        Using mem node
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
      
      
      
        <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
          Dfs script language
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Dfs script language
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/index.html" class="md-nav__link">
        Introducing the DFS Script Language
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/built-in_functions.html" class="md-nav__link">
        Built in functions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/lambda_expressions.html" class="md-nav__link">
        Lambda expressions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/macros.html" class="md-nav__link">
        Macros
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/node_connection.html" class="md-nav__link">
        Node connection
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/script_expressions.html" class="md-nav__link">
        Script expressions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="dfs_script_language/tips_and_best_pratices.html" class="md-nav__link">
        DFS Script Language tips and best pratices
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" >
      
      
      
        <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
          Nodes
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Nodes
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/index.html" class="md-nav__link">
        Faxe nodes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/aggregate.html" class="md-nav__link">
        Aggregate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/array_explode.html" class="md-nav__link">
        Array explode
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/collect.html" class="md-nav__link">
        Collect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/collect_fields.html" class="md-nav__link">
        Collect fields
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/email.html" class="md-nav__link">
        Email
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/mem.html" class="md-nav__link">
        Mem
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/python.html" class="md-nav__link">
        Python
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/stats.html" class="md-nav__link">
        Stats
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/tcp_send.html" class="md-nav__link">
        Tcp send
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/udp_send.html" class="md-nav__link">
        Udp send
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_12" >
      
      
      
        <label class="md-nav__link" for="__nav_13_12" id="__nav_13_12_label" tabindex="0">
          Data collection
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_12_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_12">
          <span class="md-nav__icon md-icon"></span>
          Data collection
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/data_collection/modbus.html" class="md-nav__link">
        Modbus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/data_collection/modbus_read.html" class="md-nav__link">
        Modbus read
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/data_collection/s7read.html" class="md-nav__link">
        S7read
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/data_collection/tcp_receive.html" class="md-nav__link">
        Tcp receive
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/data_collection/tcp_receive_line.html" class="md-nav__link">
        Tcp receive line
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/data_collection/udp_receive.html" class="md-nav__link">
        Udp receive
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_13" >
      
      
      
        <label class="md-nav__link" for="__nav_13_13" id="__nav_13_13_label" tabindex="0">
          Database
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_13_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_13">
          <span class="md-nav__icon md-icon"></span>
          Database
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/crate_out.html" class="md-nav__link">
        Crate out
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/crate_query.html" class="md-nav__link">
        Crate query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/crate_query_cont.html" class="md-nav__link">
        Crate query cont
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/http_post_crate.html" class="md-nav__link">
        Http post crate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/influx_out.html" class="md-nav__link">
        Influx out
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/mongo_query.html" class="md-nav__link">
        Mongo query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/oracle_query.html" class="md-nav__link">
        Oracle query
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/database/postgre_statement.html" class="md-nav__link">
        Postgre statement
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_14" >
      
      
      
        <label class="md-nav__link" for="__nav_13_14" id="__nav_13_14_label" tabindex="0">
          Debug
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_14_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_14">
          <span class="md-nav__icon md-icon"></span>
          Debug
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/debug/conn_status.html" class="md-nav__link">
        Conn status
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/debug/debug.html" class="md-nav__link">
        Debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/debug/json_emitter.html" class="md-nav__link">
        Json emitter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/debug/log.html" class="md-nav__link">
        Log
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/debug/metrics.html" class="md-nav__link">
        Metrics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/debug/value_emitter.html" class="md-nav__link">
        Value emitter
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_15" >
      
      
      
        <label class="md-nav__link" for="__nav_13_15" id="__nav_13_15_label" tabindex="0">
          Flow
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_15_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_15">
          <span class="md-nav__icon md-icon"></span>
          Flow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flow/collect_unique.html" class="md-nav__link">
        Collect unique
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flow/combine.html" class="md-nav__link">
        Combine
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flow/group_by.html" class="md-nav__link">
        Group by
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flow/group_union.html" class="md-nav__link">
        Group union
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flow/join.html" class="md-nav__link">
        Join
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flow/union.html" class="md-nav__link">
        Union
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_16" >
      
      
      
        <label class="md-nav__link" for="__nav_13_16" id="__nav_13_16_label" tabindex="0">
          Flowdata
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_16_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_16">
          <span class="md-nav__icon md-icon"></span>
          Flowdata
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/batch.html" class="md-nav__link">
        Batch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/default.html" class="md-nav__link">
        Default
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/delete.html" class="md-nav__link">
        Delete
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/keep.html" class="md-nav__link">
        Keep
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/rename.html" class="md-nav__link">
        Rename
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/set.html" class="md-nav__link">
        Set
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/flowdata/unbatch.html" class="md-nav__link">
        Unbatch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_17" >
      
      
      
        <label class="md-nav__link" for="__nav_13_17" id="__nav_13_17_label" tabindex="0">
          Http
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_17_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_17">
          <span class="md-nav__icon md-icon"></span>
          Http
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/http/http_get.html" class="md-nav__link">
        Http get
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/http/http_listen.html" class="md-nav__link">
        Http listen
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/http/http_post.html" class="md-nav__link">
        Http post
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_18" >
      
      
      
        <label class="md-nav__link" for="__nav_13_18" id="__nav_13_18_label" tabindex="0">
          Logic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_18_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_18">
          <span class="md-nav__icon md-icon"></span>
          Logic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/case.html" class="md-nav__link">
        Case
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/change_detect.html" class="md-nav__link">
        Change detect
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/deadman.html" class="md-nav__link">
        Deadman
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/eval.html" class="md-nav__link">
        Eval
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/if.html" class="md-nav__link">
        If
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/sample.html" class="md-nav__link">
        Sample
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/shift.html" class="md-nav__link">
        Shift
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/state_change.html" class="md-nav__link">
        State change
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/state_count.html" class="md-nav__link">
        State count
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/state_duration.html" class="md-nav__link">
        State duration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/state_sequence.html" class="md-nav__link">
        State sequence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/time_diff.html" class="md-nav__link">
        Time diff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/time_elapsed.html" class="md-nav__link">
        Time elapsed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/triggered_timeout.html" class="md-nav__link">
        Triggered timeout
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/value_diff.html" class="md-nav__link">
        Value diff
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/logic/where.html" class="md-nav__link">
        Where
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_19" >
      
      
      
        <label class="md-nav__link" for="__nav_13_19" id="__nav_13_19_label" tabindex="0">
          Messaging
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_19_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_19">
          <span class="md-nav__icon md-icon"></span>
          Messaging
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/messaging/amqp_consume.html" class="md-nav__link">
        Amqp consume
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/messaging/amqp_publish.html" class="md-nav__link">
        Amqp publish
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/messaging/mqtt_amqp_bridge.html" class="md-nav__link">
        Mqtt amqp bridge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/messaging/mqtt_publish.html" class="md-nav__link">
        Mqtt publish
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/messaging/mqtt_subscribe.html" class="md-nav__link">
        Mqtt subscribe
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_20" >
      
      
      
        <label class="md-nav__link" for="__nav_13_20" id="__nav_13_20_label" tabindex="0">
          Statistics
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_20_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_20">
          <span class="md-nav__icon md-icon"></span>
          Statistics
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/avg.html" class="md-nav__link">
        Avg
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/bottom.html" class="md-nav__link">
        Bottom
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/count.html" class="md-nav__link">
        Count
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/count_change.html" class="md-nav__link">
        Count change
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/count_distinct.html" class="md-nav__link">
        Count distinct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/distinct.html" class="md-nav__link">
        Distinct
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/elapsed.html" class="md-nav__link">
        Elapsed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/first.html" class="md-nav__link">
        First
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/geometric_mean.html" class="md-nav__link">
        Geometric mean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/kurtosis.html" class="md-nav__link">
        Kurtosis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/last.html" class="md-nav__link">
        Last
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/max.html" class="md-nav__link">
        Max
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/mean.html" class="md-nav__link">
        Mean
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/median.html" class="md-nav__link">
        Median
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/min.html" class="md-nav__link">
        Min
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/percentile.html" class="md-nav__link">
        Percentile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/stddev.html" class="md-nav__link">
        Stddev
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/sum.html" class="md-nav__link">
        Sum
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/top.html" class="md-nav__link">
        Top
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/statistics/variance.html" class="md-nav__link">
        Variance
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13_21" >
      
      
      
        <label class="md-nav__link" for="__nav_13_21" id="__nav_13_21_label" tabindex="0">
          Window
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_13_21_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_13_21">
          <span class="md-nav__icon md-icon"></span>
          Window
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/window/win_clock.html" class="md-nav__link">
        Win clock
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/window/win_event.html" class="md-nav__link">
        Win event
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/window/win_session.html" class="md-nav__link">
        Win session
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="nodes/window/win_time.html" class="md-nav__link">
        Win time
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#faxe-base-class" class="md-nav__link">
    Faxe base class
  </a>
  
    <nav class="md-nav" aria-label="Faxe base class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#callbacks" class="md-nav__link">
    Callbacks
  </a>
  
    <nav class="md-nav" aria-label="Callbacks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options-static" class="md-nav__link">
    options (static)
  </a>
  
    <nav class="md-nav" aria-label="options (static)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#example" class="md-nav__link">
    Example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-types-for-options" class="md-nav__link">
    Data types for options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#common-options-for-every-custom-node" class="md-nav__link">
    Common options for every custom node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#init" class="md-nav__link">
    init
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle_point" class="md-nav__link">
    handle_point
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#handle_batch" class="md-nav__link">
    handle_batch
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inherited-methods-from-the-faxe-class" class="md-nav__link">
    Inherited methods from the Faxe class
  </a>
  
    <nav class="md-nav" aria-label="Inherited methods from the Faxe class">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#emit" class="md-nav__link">
    emit
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#log" class="md-nav__link">
    log
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#now-static" class="md-nav__link">
    now (static)
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-types" class="md-nav__link">
    Data types
  </a>
  
    <nav class="md-nav" aria-label="Data types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#faxe-data-items" class="md-nav__link">
    FAXE Data items
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-point" class="md-nav__link">
    data-point
  </a>
  
    <nav class="md-nav" aria-label="data-point">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fields" class="md-nav__link">
    fields
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tags" class="md-nav__link">
    tags
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dtag" class="md-nav__link">
    dtag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#data-batch" class="md-nav__link">
    data-batch
  </a>
  
    <nav class="md-nav" aria-label="data-batch">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    points
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dtag_1" class="md-nav__link">
    dtag
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-persistence" class="md-nav__link">
    State persistence
  </a>
  
    <nav class="md-nav" aria-label="State persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#activate-persistence" class="md-nav__link">
    Activate persistence
  </a>
  
    <nav class="md-nav" aria-label="Activate persistence">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#manual" class="md-nav__link">
    manual
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#state-data" class="md-nav__link">
    State data
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#helper-classes" class="md-nav__link">
    Helper classes
  </a>
  
    <nav class="md-nav" aria-label="Helper classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#helper-class-for-working-with-data-point-objects" class="md-nav__link">
    Helper class for working with data-point objects.
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#helper-class-for-working-with-data-batch-objects" class="md-nav__link">
    Helper class for working with data-batch objects.
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="custom-nodes-written-in-python">Custom nodes written in python</h1>
<p>Faxe allows for custom nodes to be used in any flow just like any of the built-in nodes.
Therefore, a dedicated interface can be used, which will be described here.</p>
<p>Custom nodes are written in python &gt;= 3.6 in FAXE.</p>
<p>The syntax for calling a custom node in <a href="dfs_script_language/index.html">DFS</a> is exactly the same as for any built-in node, but instead of a 
pipe symbol, we use the <code>@</code> symbol.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #f92672">|</span><span style="color: #a6e22e">built_in_node</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">opt1</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;somestring&#39;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">opt2</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">11</span><span style="color: #f8f8f2">)</span>

    <span style="color: #66d9ef">@</span><span style="color: #a6e22e">custom_node</span><span style="color: #f8f8f2">()</span>
    <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">option1</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;astring&#39;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">option2</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">22</span><span style="color: #f8f8f2">)</span>
</code></pre></div>

<h2 id="faxe-base-class">Faxe base class</h2>
<p>When writing a custom node in python, we have to create a python class, that inherits from the base class <code>Faxe</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<p>In our class we can use a bunch of callbacks:</p>
<h3 id="callbacks">Callbacks</h3>
<blockquote>
<p>All callbacks are optional.</p>
</blockquote>
<h4 id="options-static"><strong>options (static)</strong></h4>
<p>The <code>options</code> callback is used to tell FAXE, what node options you want to use for your python node.
The return type for this callback is a <code>list of 2-or-3 tuples</code>.</p>
<blockquote>
<p><code>options</code> is the only static callback and the only one, that has to return a value. </p>
</blockquote>
<p>The first two elements of the tuples must be strings, the third, if given, depends on the <code>data_type</code>.
Every option, that has no <code>default value</code> (3rd element in the tuple) is mandatory in DFS scripts.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;name_of_the_option&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;data_type&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{optional_default_value})</span>
</code></pre></div>

<h5 id="example">Example</h5>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">options</span><span style="color: #f8f8f2">():</span>
        <span style="color: #f8f8f2">opts</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">[</span>
            <span style="color: #75715e"># mandatory</span>
            <span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;field&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;string&quot;</span><span style="color: #f8f8f2">),</span>
            <span style="color: #75715e"># optional</span>
            <span style="color: #f8f8f2">(</span><span style="color: #e6db74">&quot;val&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&quot;integer&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">33</span><span style="color: #f8f8f2">),</span>

        <span style="color: #f8f8f2">]</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">opts</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<p>The above example node can be used in DFS like so:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #66d9ef">@</span><span style="color: #a6e22e">mynode</span><span style="color: #f8f8f2">()</span>
    <span style="color: #75715e">% mandatory</span>
    <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">field</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;some_field_path&#39;</span><span style="color: #f8f8f2">)</span>
    <span style="color: #75715e">% optional</span>
    <span style="color: #f8f8f2">.</span><span style="color: #a6e22e">val</span><span style="color: #f8f8f2">(</span><span style="color: #ae81ff">44</span><span style="color: #f8f8f2">)</span>
</code></pre></div>

<h4 id="data-types-for-options">Data types for options</h4>
<p>The second element of an options tuple defines the data type, that must be given in DFS.
A subset of the option types used for <a href="nodes/index.html">built-in nodes</a> can be used.</p>
<table>
<thead>
<tr>
<th>type</th>
<th align="left">description</th>
<th>DFS example</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>string</code></td>
<td align="left"></td>
<td>.option('string_value')</td>
</tr>
<tr>
<td><code>integer</code></td>
<td align="left"></td>
<td>.option(123)</td>
</tr>
<tr>
<td><code>float</code></td>
<td align="left"></td>
<td>.option(123.1564)</td>
</tr>
<tr>
<td><code>number</code></td>
<td align="left">integer or float</td>
<td>.option(456.1564)</td>
</tr>
<tr>
<td><code>double</code></td>
<td align="left">same as float</td>
<td>.option(13.98741755)</td>
</tr>
<tr>
<td><code>bool</code></td>
<td align="left"></td>
<td>.option(false)</td>
</tr>
<tr>
<td><code>string_list</code></td>
<td align="left">1 or more string values</td>
<td>.option('string1', 'string2', 'string3')</td>
</tr>
<tr>
<td><code>integer_list</code></td>
<td align="left">1 or more integer values</td>
<td>.option(1, 2, 3, 4445)</td>
</tr>
<tr>
<td><code>float_list</code></td>
<td align="left">1 or more float values</td>
<td>.option(1.11, 2.456486, 3.0, 44.45)</td>
</tr>
<tr>
<td><code>number_list</code></td>
<td align="left">1 or more number values</td>
<td>.option(1.11, 2, 3.0, 45)</td>
</tr>
<tr>
<td><code>list</code></td>
<td align="left">list of possibly mixed data types</td>
<td>.option('name', 11, 234.3, 'one', 'two')</td>
</tr>
</tbody>
</table>
<h4 id="common-options-for-every-custom-node">Common options for every custom node</h4>
<table>
<thead>
<tr>
<th>option</th>
<th align="left">description</th>
<th>default</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>as</code>( string )</td>
<td align="left">field path for the output data, used to give data a new root</td>
<td>undefined</td>
</tr>
<tr>
<td><code>stop_on_exit</code>(boolean)</td>
<td align="left">if set to true, the whole corresponding flow will stop, when the python runtime exits because of an error (exception)</td>
<td>true</td>
</tr>
</tbody>
</table>
<hr />
<h4 id="init"><strong>init</strong></h4>
<p>The <code>init</code> callback is called on class instatiation, it gets injected a dictionary with the <a href="#callbacks">option values</a> given in the DFS script.</p>
<blockquote>
<p>Do not overwrite the <code>__init__</code> method. The callback will not work in this case.</p>
</blockquote>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">init</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">args</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
        <span style="color: #75715e"># store the option values for later usage</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">fieldname</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">args[</span><span style="color: #e6db74">&quot;field&quot;</span><span style="color: #f8f8f2">]</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">value</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">args[</span><span style="color: #e6db74">&quot;val&quot;</span><span style="color: #f8f8f2">]</span> 

    <span style="color: #f92672">...</span>
</code></pre></div>

<hr />
<h4 id="handle_point"><strong>handle_point</strong></h4>
<p><code>handle_point</code> is called every time the custom node receives a data-point structure from upstream nodes in a FAXE flow.
For details on the point structure see <a href="#data-point">FAXE Data items - data_point</a> below.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">handle_point</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">point_data):</span>  
        <span style="color: #75715e"># use the inherited emit method to emit data to downstream nodes in the flow</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">emit(point_data)</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<hr />
<h4 id="handle_batch"><strong>handle_batch</strong></h4>
<p><code>handle_batch</code> is called every time the custom node receives a data-batch structure from upstream nodes in a FAXE flow.
For details on the batch structure see <a href="#data-batch">FAXE Data items - data_batch</a> below.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">handle_batch</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">batch_data):</span>  
        <span style="color: #75715e"># use the inherited emit method to emit data to downstream nodes in the flow</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">emit(batch_data)</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<h3 id="inherited-methods-from-the-faxe-class">Inherited methods from the Faxe class</h3>
<h4 id="emit"><strong>emit</strong></h4>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">emit</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">emit_data:</span> <span style="color: #f8f8f2">dict):</span>
</code></pre></div>

<p>The <code>emit</code> method inherited from the base class (Faxe), is the only way send data to downstream nodes in a FAXE flow.
It can take both <a href="#data-point">point</a> and <a href="#data-batch">batch</a> data structures.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">my_method</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #f8f8f2">batch_data</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">my_batch_data</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">emit(batch_data)</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<h4 id="log"><strong>log</strong></h4>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">log</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">msg:</span> <span style="color: #f8f8f2">str,</span> <span style="color: #f8f8f2">level</span><span style="color: #f92672">=</span><span style="color: #e6db74">&#39;notice&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">str):</span>
<span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">:param level: &#39;debug&#39; | &#39;info&#39; | &#39;notice&#39; | &#39;warning&#39; | &#39;error&#39; | &#39;critical&#39; | &#39;alert&#39;</span>
<span style="color: #e6db74">&quot;&quot;&quot;</span>
</code></pre></div>

<p>The <code>log</code> method inherited from the base class (Faxe), can be used for logging.
Using this method makes sure, your log data will be injected into FAXE's logging infrastructure.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">my_method</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">param):</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">log(</span><span style="color: #e6db74">f&quot;my_method is called with {</span><span style="color: #f8f8f2">param</span><span style="color: #e6db74">}&quot;</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;info&#39;</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f92672">...</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<h4 id="now-static"><strong>now</strong> (static)</h4>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #a6e22e">@staticmethod</span>
<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">now</span><span style="color: #f8f8f2">():</span>
<span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">    unix timestamp in milliseconds (utc)</span>
<span style="color: #e6db74">    :return: int</span>
<span style="color: #e6db74">    &quot;&quot;&quot;</span>
</code></pre></div>

<p>Used to retrieve the current timestamp in milliseconds.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">my_method</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">_param):</span>
        <span style="color: #f8f8f2">now</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Faxe</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">now()</span>
        <span style="color: #f92672">...</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<h2 id="data-types">Data types</h2>
<p>Comparing data types on each side</p>
<table>
<thead>
<tr>
<th>FAXE</th>
<th>python</th>
</tr>
</thead>
<tbody>
<tr>
<td>string</td>
<td>string</td>
</tr>
<tr>
<td>binary</td>
<td>string</td>
</tr>
<tr>
<td>integer</td>
<td>integer</td>
</tr>
<tr>
<td>floating point number</td>
<td>floating point number</td>
</tr>
<tr>
<td>map</td>
<td>dictionary</td>
</tr>
<tr>
<td>list</td>
<td>list</td>
</tr>
<tr>
<td>----------------</td>
<td>------------------</td>
</tr>
<tr>
<td>data-point</td>
<td>dictionary, see below</td>
</tr>
<tr>
<td>data-batch</td>
<td>dictionary, see below</td>
</tr>
</tbody>
</table>
<h3 id="faxe-data-items">FAXE Data items</h3>
<p>As you remember, in FAXE we know two types of data-items, data-point and data-batch.</p>
<p>How do data-items look like in python ?</p>
<h3 id="data-point">data-point</h3>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #75715e">## data-point</span>
    <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;f2&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f2_1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;mode_on&#39;</span><span style="color: #f8f8f2">}},</span> <span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1669407781437</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{}}</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>field</th>
<th>data type</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>ts</code></td>
<td>integer</td>
<td>millisecond timestamp</td>
</tr>
<tr>
<td><code>fields</code></td>
<td>dictionary</td>
<td>a dictionary of fields, a data-point carries,</td>
</tr>
<tr>
<td><code>tags</code></td>
<td>dictionary</td>
<td>a dictionary of tags, a data-point carries</td>
</tr>
<tr>
<td><code>dtag</code></td>
<td>integer or None</td>
<td>delivery tag, see description below</td>
</tr>
</tbody>
</table>
<h4 id="fields">fields</h4>
<p>A <strong>key</strong> in the <code>fields</code> dict is called <code>fieldname</code> and is always a <strong>string</strong>.</p>
<p>A dict <strong>value</strong> can be of any of the above listed data-types, including dictionary and list. </p>
<p><em><strong>Examples</strong></em></p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;field1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;string&#39;</span><span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;field2&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1235468486</span><span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;field3&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">12354.68486</span><span style="color: #f8f8f2">}</span>
    <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;field4&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;field4_1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">[</span><span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">43</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">4</span><span style="color: #f8f8f2">,</span><span style="color: #ae81ff">67.7</span><span style="color: #f8f8f2">]}}</span>
</code></pre></div>

<h4 id="tags">tags</h4>
<p>For <code>tags</code>, keys and values are <strong>strings</strong> only.</p>
<h4 id="dtag">dtag</h4>
<p>A delivery tag is used to acknowledge a data-item to upstream nodes. Can be ignored for python nodes at the moment.</p>
<h3 id="data-batch">data-batch</h3>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>    <span style="color: #75715e">## data-batch</span>
    <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">[</span>
        <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;f2&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f2_1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;mode_on&#39;</span><span style="color: #f8f8f2">}},</span> <span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1669407781437</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{}},</span>
        <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">2</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;f2&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f2_1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;mode_off&#39;</span><span style="color: #f8f8f2">}},</span> <span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1669407781438</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{}},</span>
        <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">3</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;f2&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;f2_1&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;mode_on&#39;</span><span style="color: #f8f8f2">}},</span> <span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1669407781439</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">{}},</span>
    <span style="color: #f8f8f2">],</span> 
    <span style="color: #e6db74">&#39;start_ts&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #ae81ff">1669407781437</span><span style="color: #f8f8f2">,</span> <span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">}</span>
</code></pre></div>

<table>
<thead>
<tr>
<th>field</th>
<th>data type</th>
<th>meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>start_ts</code></td>
<td>integer or None</td>
<td>millisecond timestamp, not always set</td>
</tr>
<tr>
<td><code>points</code></td>
<td>list</td>
<td>a list of data-points, sorted by their timestamps ascending</td>
</tr>
<tr>
<td><code>dtag</code></td>
<td>integer or None</td>
<td>delivery tag, see description below</td>
</tr>
</tbody>
</table>
<h4 id="points">points</h4>
<p>In a data-batch, <code>points</code> is a list of <strong>data-points</strong>, the list can be of any length (Note :there is no length check in place at the moment).</p>
<h4 id="dtag_1">dtag</h4>
<p>See <a href="#data-point">data-point</a> for a description.</p>
<hr />
<h2 id="state-persistence">State persistence</h2>
<p>Faxe introduced the concept of state persistence for flows in version 1.2.0.
With state persistence active for a flow, the faxe engine will persist state for every node in a flow to disc to be able
to continue a flow where it left off, if for example a restart of the whole engine is necessary due to a version update.</p>
<p>Read more about state persistence <a href="state_persistence.html">here</a>.</p>
<p>Custom python node can also utilize this feature. When on startup of a python node there is persisted state found for that
node on the disc, this state data will be injected to the node's startup procedure.</p>
<h3 id="activate-persistence">Activate persistence</h3>
<p>There are different ways, state gets persisted for custom python nodes:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code># defined in Faxe.py 

STATE_MODE_HANDLE   = &#39;handle&#39;
STATE_MODE_EMIT     = &#39;emit&#39;
STATE_MODE_MANUAL   = &#39;manual&#39;
</code></pre></div>

<ul>
<li>STATE_MODE_HANDLE means, that state is automatically persisted, after every call to either <code>handle_batch</code> or <code>handle_point</code>.</li>
<li>STATE_MODE_EMIT means, state is auto persisted after every call to self.emit() by the python node.</li>
<li>STATE_MODE_MANUAL means, that it is completely up to the python node when to persist state.</li>
</ul>
<p>To choose which mode to use, simple implement the <code>state_mode</code> method:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe</span>

<span style="color: #66d9ef">def</span> <span style="color: #a6e22e">state_mode</span><span style="color: #f8f8f2">(self):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Faxe</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">STATE_MODE_MANUAL</span>
</code></pre></div>

<p>In the above example, the state mode is <code>manual</code>. In this mode the python node has to decide when to persist state and this
is done with the <code>persist_state</code> method:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>def persist_state(self, state=None):
        &quot;&quot;&quot;
        :param state: any|None
        &quot;&quot;&quot;
        ...
</code></pre></div>

<h4 id="manual">manual</h4>
<p>If state is None, then the state that gets persisted will be retreived either from the format_state method (see below) or,
if format_state is not implemented, the state will be a dictionary with every member var of the object.</p>
<p>Example:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">my_method</span><span style="color: #f8f8f2">(self):</span>

    <span style="color: #f92672">...</span>

    <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">persist_state()</span>

    <span style="color: #75715e"># OR provide state</span>
    <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">persist_state(state</span><span style="color: #f92672">=</span><span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;mystate&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #e6db74">&#39;dict&#39;</span><span style="color: #f8f8f2">})</span>

    <span style="color: #f92672">...</span>
</code></pre></div>

<h3 id="state-data">State data</h3>
<p>State data can be of any <a href="https://docs.python.org/3/library/pickle.html">pickle-able</a> type.</p>
<p>If the python node does not overwrite the <code>format_state</code> method, 
the Faxe base class will provide a dictionary with all the member vars of the python callback object using
python's <a href="https://docs.python.org/3/library/functions.html#vars">vars</a> function.</p>
<p>With the <code>format_state</code> method, the python node can provide state data as it wishes:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">def</span> <span style="color: #a6e22e">format_state</span><span style="color: #f8f8f2">(self):</span>
   <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">{</span><span style="color: #e6db74">&#39;counter&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">counter,</span> <span style="color: #e6db74">&#39;items&#39;</span><span style="color: #f8f8f2">:</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">items}</span>
</code></pre></div>

<p>As shown <a href="#manual">above</a>, state data can also be given, when calling the persist_state method.</p>
<p>A python node can then get this state data with the <code>get_state</code> method:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>def get_state(self):
    &quot;&quot;&quot;
    get the last persisted state data, that was given to this node
    :return: any
    &quot;&quot;&quot;
    return self._pstate
</code></pre></div>

<p>Example:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe,</span> <span style="color: #f8f8f2">Point,</span> <span style="color: #f8f8f2">Batch</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">init</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">args</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>

        <span style="color: #f92672">...</span>

        <span style="color: #75715e"># get the state</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">mystate</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get_state()</span>


    <span style="color: #f92672">...</span>
</code></pre></div>

<p>We can also use the <code>get_state_value</code> method (works when state data is a dictionary) and initialize member vars in an elegant way:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code>def get_state_value(self, key, default=None):
        &quot;&quot;&quot;
        get a specific entry from the state, if state is a dict, otherwise returns &#39;default&#39;
        :param key: string
        :param default: any
        :return: any
        &quot;&quot;&quot;
        if type(self._pstate) == dict:
            if key in self._pstate:
                return self._pstate[key]
        return default
</code></pre></div>

<p>Example:</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe,</span> <span style="color: #f8f8f2">Point,</span> <span style="color: #f8f8f2">Batch</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>

    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">init</span><span style="color: #f8f8f2">(self,</span> <span style="color: #f8f8f2">args</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>

        <span style="color: #f92672">...</span>

        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">item_counter</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get_state_value(</span><span style="color: #e6db74">&#39;item_counter&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #ae81ff">0</span><span style="color: #f8f8f2">)</span>
        <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">items</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">self</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get_state_value(</span><span style="color: #e6db74">&#39;items&#39;</span><span style="color: #f8f8f2">,</span> <span style="color: #f8f8f2">{})</span>


    <span style="color: #f92672">...</span>
</code></pre></div>

<h2 id="helper-classes">Helper classes</h2>
<p>There are helper classes to make it easier to work with data coming from the faxe engine. All functions are static so you do not 
instanciate them and nothing is stored inside an object, making it possible to mix the usage of the helpers with inline code.</p>
<p>To use the helper classes, just import <code>faxe.Point</code> and/or <code>faxe.Batch</code>.</p>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #f92672">from</span> <span style="color: #f8f8f2">faxe</span> <span style="color: #f92672">import</span> <span style="color: #f8f8f2">Faxe,</span> <span style="color: #f8f8f2">Point,</span> <span style="color: #f8f8f2">Batch</span>


<span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Mynode</span><span style="color: #f8f8f2">(Faxe):</span>
    <span style="color: #f92672">...</span> 
</code></pre></div>

<hr />
<h3 id="helper-class-for-working-with-data-point-objects">Helper class for working with data-point objects.</h3>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Point</span><span style="color: #f8f8f2">:</span>
<span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">    Completely static helper class for data-point structures (dicts)</span>

<span style="color: #e6db74">    point = dict()</span>
<span style="color: #e6db74">    point[&#39;ts&#39;] = int millisecond timestamp</span>
<span style="color: #e6db74">    point[&#39;fields&#39;] = dict()</span>
<span style="color: #e6db74">    point[&#39;tags&#39;] = dict()</span>
<span style="color: #e6db74">    point[&#39;dtag&#39;] = int</span>

<span style="color: #e6db74">    &quot;&quot;&quot;</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">new</span><span style="color: #f8f8f2">(ts</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
        <span style="color: #f8f8f2">p</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">dict()</span>
        <span style="color: #f8f8f2">p[</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">dict()</span>
        <span style="color: #f8f8f2">p[</span><span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">dict()</span>
        <span style="color: #f8f8f2">p[</span><span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">None</span>
        <span style="color: #f8f8f2">p[</span><span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">ts</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">p</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">fields</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">newfields</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        get or set all the fields (dict)</span>
<span style="color: #e6db74">        :param point_data: dict()</span>
<span style="color: #e6db74">        :param newfields: dict()</span>
<span style="color: #e6db74">        :return: dict()</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">newfields</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">newfields</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">dict(point_data[</span><span style="color: #e6db74">&#39;fields&#39;</span><span style="color: #f8f8f2">])</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">value</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        get or set a specific field</span>
<span style="color: #e6db74">        :param point_data: dict()</span>
<span style="color: #e6db74">        :param path: string</span>
<span style="color: #e6db74">        :param value: any</span>
<span style="color: #e6db74">        :return: None, if field is not found /</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">value</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">Jsn</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set(point_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value)</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">Jsn</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get(point_data,</span> <span style="color: #f8f8f2">path)</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">values</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">paths,</span> <span style="color: #f8f8f2">value</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        get or set a specific field</span>
<span style="color: #e6db74">        :param point_data: dict</span>
<span style="color: #e6db74">        :param paths: list</span>
<span style="color: #e6db74">        :param value: any</span>
<span style="color: #e6db74">        :return: point_data|list</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">value</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">path</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">paths:</span>
                <span style="color: #f8f8f2">Jsn</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">set(point_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value)</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

        <span style="color: #f8f8f2">out</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">list()</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">path</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">paths:</span>
            <span style="color: #f8f8f2">out</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(Jsn</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">get(point_data,</span> <span style="color: #f8f8f2">path))</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">out</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">default</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>

<span style="color: #e6db74">        :param point_data:</span>
<span style="color: #e6db74">        :param path:</span>
<span style="color: #e6db74">        :param value:</span>
<span style="color: #e6db74">        :return:</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">Point</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">value(point_data,</span> <span style="color: #f8f8f2">path)</span> <span style="color: #f92672">is</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">Point</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">value(point_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value)</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">tags</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">newtags</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">newtags</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">newtags</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;tags&#39;</span><span style="color: #f8f8f2">]</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">ts</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">newts</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        get or set the timestamp of this point</span>
<span style="color: #e6db74">        :param point_data: dict</span>
<span style="color: #e6db74">        :param newts: integer</span>
<span style="color: #e6db74">        :return: integer|dict</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">newts</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">int(newts)</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;ts&#39;</span><span style="color: #f8f8f2">]</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">dtag</span><span style="color: #f8f8f2">(point_data,</span> <span style="color: #f8f8f2">newdtag</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">newdtag</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">newdtag</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">point_data[</span><span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">]</span>
</code></pre></div>

<h3 id="helper-class-for-working-with-data-batch-objects">Helper class for working with data-batch objects.</h3>
<div class="codehilite" style="background: #272822"><pre style="line-height: 125%;"><span></span><code><span style="color: #66d9ef">class</span> <span style="color: #a6e22e">Batch</span><span style="color: #f8f8f2">:</span>
<span style="color: #f8f8f2">    </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">    Completely static helper class for data-batch structures (dicts)</span>

<span style="color: #e6db74">    batch = dict()</span>
<span style="color: #e6db74">    batch[&#39;points&#39;] = list() of point dicts sorted by their timestamps</span>
<span style="color: #e6db74">    batch[&#39;start_ts&#39;] = int millisecond unix timestamp denoting the start of this batch</span>

<span style="color: #e6db74">    batch[&#39;dtag&#39;] = int</span>
<span style="color: #e6db74">    &quot;&quot;&quot;</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">new</span><span style="color: #f8f8f2">(start_ts</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
        <span style="color: #f8f8f2">b</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">dict()</span>
        <span style="color: #f8f8f2">b[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">list()</span>
        <span style="color: #f8f8f2">b[</span><span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #66d9ef">None</span>
        <span style="color: #f8f8f2">b[</span><span style="color: #e6db74">&#39;start_ts&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">start_ts</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">b</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">empty</span><span style="color: #f8f8f2">(batch_data):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        a Batch is empty, if it has no points</span>
<span style="color: #e6db74">        :param batch_data:</span>
<span style="color: #e6db74">        :return: True | False</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;points&#39;</span> <span style="color: #f92672">not</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">batch_data)</span> <span style="color: #f92672">or</span> <span style="color: #f8f8f2">(batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">==</span> <span style="color: #f8f8f2">[])</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">points</span><span style="color: #f8f8f2">(batch_data,</span> <span style="color: #f8f8f2">points</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>

<span style="color: #e6db74">        :param points: None | list()</span>
<span style="color: #e6db74">        :param batch_data: dict</span>
<span style="color: #e6db74">        :return: list</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">points</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">points</span>
            <span style="color: #f8f8f2">Batch</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">sort_points(batch_data)</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">list(batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">])</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">value</span><span style="color: #f8f8f2">(batch_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        get or set path from/to every point in a batch</span>
<span style="color: #e6db74">        :param batch_data:</span>
<span style="color: #e6db74">        :param path:</span>
<span style="color: #e6db74">        :param value:</span>
<span style="color: #e6db74">        :return: list</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #f8f8f2">out</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">list()</span>
        <span style="color: #f8f8f2">points</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">p</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">points:</span>
            <span style="color: #f8f8f2">out</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(Point</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">value(p,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value))</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">value</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">out</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">values</span><span style="color: #f8f8f2">(batch_data,</span> <span style="color: #f8f8f2">paths,</span> <span style="color: #f8f8f2">value</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>
<span style="color: #e6db74">        get or set path from/to every point in a batch</span>
<span style="color: #e6db74">        :param batch_data:</span>
<span style="color: #e6db74">        :param paths:</span>
<span style="color: #e6db74">        :param value:</span>
<span style="color: #e6db74">        :return: list</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f92672">not</span> <span style="color: #f8f8f2">isinstance(paths,</span> <span style="color: #f8f8f2">list):</span>
            <span style="color: #66d9ef">raise</span> <span style="color: #a6e22e">TypeError</span><span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;Batch.values() - paths must be a list of strings&#39;</span><span style="color: #f8f8f2">)</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">value</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">points</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span>
            <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">p</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">points:</span>
                <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">path</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">paths:</span>
                    <span style="color: #f8f8f2">Point</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">value(p,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value)</span>
            <span style="color: #75715e"># batch_data[&#39;points&#39;] = points</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data</span>
        <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">out</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">list()</span>
            <span style="color: #f8f8f2">points</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span>
            <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">p</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">points:</span>
                <span style="color: #f8f8f2">odict</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">dict()</span>
                <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">path</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">paths:</span>
                    <span style="color: #f8f8f2">odict[path]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">Point</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">value(p,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value)</span>
                <span style="color: #f8f8f2">out</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(odict)</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">out</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">default</span><span style="color: #f8f8f2">(batch_data,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value):</span>
<span style="color: #f8f8f2">        </span><span style="color: #e6db74">&quot;&quot;&quot;</span>

<span style="color: #e6db74">        :param batch_data:</span>
<span style="color: #e6db74">        :param path:</span>
<span style="color: #e6db74">        :param value:</span>
<span style="color: #e6db74">        :return:</span>
<span style="color: #e6db74">        &quot;&quot;&quot;</span>
        <span style="color: #f8f8f2">points</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span>
        <span style="color: #66d9ef">for</span> <span style="color: #f8f8f2">p</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">points:</span>
            <span style="color: #f8f8f2">Point</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">default(p,</span> <span style="color: #f8f8f2">path,</span> <span style="color: #f8f8f2">value)</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">dtag</span><span style="color: #f8f8f2">(batch_data):</span>
        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;dtag&#39;</span><span style="color: #f8f8f2">]</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">start_ts</span><span style="color: #f8f8f2">(batch_data,</span> <span style="color: #f8f8f2">newts</span><span style="color: #f92672">=</span><span style="color: #66d9ef">None</span><span style="color: #f8f8f2">):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">newts</span> <span style="color: #f92672">is</span> <span style="color: #f92672">not</span> <span style="color: #66d9ef">None</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;start_ts&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">newts</span>
            <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;start_ts&#39;</span><span style="color: #f8f8f2">]</span>

    <span style="color: #a6e22e">@staticmethod</span>
    <span style="color: #66d9ef">def</span> <span style="color: #a6e22e">add</span><span style="color: #f8f8f2">(batch_data,</span> <span style="color: #f8f8f2">point):</span>
        <span style="color: #66d9ef">if</span> <span style="color: #f8f8f2">(</span><span style="color: #e6db74">&#39;points&#39;</span> <span style="color: #f92672">not</span> <span style="color: #f92672">in</span> <span style="color: #f8f8f2">batch_data)</span> <span style="color: #f92672">or</span> <span style="color: #f8f8f2">(type(batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">])</span> <span style="color: #f92672">!=</span> <span style="color: #f8f8f2">list):</span>
            <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span> <span style="color: #f92672">=</span> <span style="color: #f8f8f2">list()</span>
            <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(point)</span>
        <span style="color: #66d9ef">else</span><span style="color: #f8f8f2">:</span>
            <span style="color: #f8f8f2">batch_data[</span><span style="color: #e6db74">&#39;points&#39;</span><span style="color: #f8f8f2">]</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">append(point)</span>
            <span style="color: #f8f8f2">Batch</span><span style="color: #f92672">.</span><span style="color: #f8f8f2">sort_points(batch_data)</span>

        <span style="color: #66d9ef">return</span> <span style="color: #f8f8f2">batch_data</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": ".", "features": [], "search": "assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.6df46069.min.js"></script>
      
    
  </body>
</html>